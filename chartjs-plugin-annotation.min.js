/*!
 * chartjs-plugin-annotation.js
 * http://chartjs.org/
 * Version: 0.5.6
 *
 * Copyright 2016 Evert Timberg
 * Released under the MIT license
 * https://github.com/chartjs/Chart.Annotation.js/blob/master/LICENSE.md
 */
!function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return o(n?n:t)},l,l.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){},{}],2:[function(t,e,n){e.exports=function(e){function n(t){r.decorate(t,"afterDataLimits",function(t,e){t&&t(e),r.adjustScaleRange(e)})}function i(t){return function(e,n){var i=e.annotation.options.drawTime;r.elements(e).filter(function(e){return t===(e.options.drawTime||i)}).forEach(function(t){t.transition(n).draw()})}}var o=e.helpers,r=t("./helpers.js")(e),a=e.Annotation.types;return{beforeInit:function(t){var e=t.options,i=t.annotation={elements:{},options:r.initConfig(e.annotation||{}),onDestroy:[],firstRun:!0,supported:!1};t.ensureScalesHaveIDs(),e.scales&&(i.supported=!0,o.each(e.scales.xAxes,n),o.each(e.scales.yAxes,n))},beforeUpdate:function(t){var e=t.annotation;if(e.supported){e.firstRun?(t.chartArea={left:0,top:0,right:0,bottom:0},e.firstRun=!1):e.options=r.initConfig(t.options.annotation||{});var n=[];e.options.annotations.forEach(function(i){var o=i.id||r.objectId();if(!e.elements[o]&&a[i.type]){var s=a[i.type],c=new s({id:o,options:i,chartInstance:t});c.initialize(),e.elements[o]=c,i.id=o,n.push(o)}else e.elements[o]&&n.push(o)}),Object.keys(e.elements).forEach(function(t){n.indexOf(t)===-1&&(e.elements[t].destroy(),delete e.elements[t])})}},afterScaleUpdate:function(t){r.elements(t).forEach(function(t){t.configure()})},beforeDatasetsDraw:i("beforeDatasetsDraw"),afterDatasetsDraw:i("afterDatasetsDraw"),afterDraw:i("afterDraw"),destroy:function(t){for(var e=t.annotation.onDestroy;e.length>0;)e.pop()()}}}},{"./helpers.js":4}],3:[function(t,e,n){e.exports=function(t){var e=t.helpers,n=t.Element.extend({initialize:function(){this.hidden=!1,this.hovering=!1,this._model=e.clone(this._model)||{},this.setDataLimits()},destroy:function(){},setDataLimits:function(){},configure:function(){},inRange:function(){},getCenterPoint:function(){},getWidth:function(){},getHeight:function(){},getArea:function(){},draw:function(){}});return n}},{}],4:[function(t,e,n){function i(){}function o(t){var e=t.annotation.elements;return Object.keys(e).map(function(t){return e[t]})}function r(){return Math.random().toString(36).substr(2,6)}function a(t){return null!==t&&"undefined"!=typeof t&&("number"==typeof t?isFinite(t):!!t)}function s(t,e,n){var i="$";t[i+e]||(t[e]?(t[i+e]=t[e].bind(t),t[e]=function(){var o=[t[i+e]].concat(Array.prototype.slice.call(arguments));return n.apply(t,o)}):t[e]=function(){var e=[void 0].concat(Array.prototype.slice.call(arguments));return n.apply(t,e)})}function c(t,e){t.forEach(function(t){(e?t[e]:t)()})}function u(t){return"on"+t[0].toUpperCase()+t.substring(1)}function l(t,e){try{return new MouseEvent(t,e)}catch(n){try{var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,e.canBubble,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),i}catch(o){var r=document.createEvent("Event");return r.initEvent(t,e.canBubble,e.cancelable),r}}}e.exports=function(t){function e(e){return e=p.configMerge(t.Annotation.defaults,e),p.isArray(e.annotations)&&e.annotations.forEach(function(e){e.label=p.configMerge(t.Annotation.labelDefaults,e.label)}),e}function n(t,e,n,i){var o=e.filter(function(e){return!!e._model.ranges[t]}).map(function(e){return e._model.ranges[t]}),r=o.map(function(t){return Number(t.min)}).reduce(function(t,e){return isFinite(e)&&!isNaN(e)&&e<t?e:t},n),a=o.map(function(t){return Number(t.max)}).reduce(function(t,e){return isFinite(e)&&!isNaN(e)&&e>t?e:t},i);return{min:r,max:a}}function f(t){var e=n(t.id,o(t.chart),t.min,t.max);"undefined"==typeof t.options.ticks.min&&"undefined"==typeof t.options.ticks.suggestedMin&&(t.min=e.min),"undefined"==typeof t.options.ticks.max&&"undefined"==typeof t.options.ticks.suggestedMax&&(t.max=e.max),t.handleTickRangeOptions&&t.handleTickRangeOptions()}function d(t,e){var n=Number.POSITIVE_INFINITY;return t.filter(function(t){return t.inRange(e.x,e.y)}).reduce(function(t,i){var o=i.getCenterPoint(),r=p.distanceBetweenPoints(e,o);return r<n?(t=[i],n=r):r===n&&t.push(i),t},[]).sort(function(t,e){var n=t.getArea(),i=e.getArea();return n>i||n<i?n-i:t._index-e._index}).slice(0,1)[0]}var p=t.helpers;return{initConfig:e,elements:o,callEach:c,noop:i,objectId:r,isValid:a,decorate:s,adjustScaleRange:f,getNearestItems:d,getEventHandlerName:u,createMouseEvent:l}}},{}],5:[function(t,e,n){var i=t("chart.js");i="function"==typeof i?i:window.Chart,i.Annotation=i.Annotation||{},i.Annotation.drawTimeOptions={afterDraw:"afterDraw",afterDatasetsDraw:"afterDatasetsDraw",beforeDatasetsDraw:"beforeDatasetsDraw"},i.Annotation.defaults={drawTime:"afterDatasetsDraw",dblClickSpeed:350,events:[],annotations:[]},i.Annotation.labelDefaults={backgroundColor:"rgba(0,0,0,0.8)",fontFamily:i.defaults.global.defaultFontFamily,fontSize:i.defaults.global.defaultFontSize,fontStyle:"bold",fontColor:"#fff",xPadding:6,yPadding:6,cornerRadius:6,position:"center",xAdjust:0,yAdjust:0,enabled:!1,content:null},i.Annotation.Element=t("./element.js")(i),i.Annotation.types={box:t("./types/box.js")(i)};var o=t("./annotation.js")(i);e.exports=o,i.pluginService.register(o)},{"./annotation.js":2,"./element.js":3,"./types/box.js":6,"chart.js":1}],6:[function(t,e,n){e.exports=function(e){var n=t("../helpers.js")(e),i=e.Annotation.Element.extend({setDataLimits:function(){var t=this._model,e=this.options,i=this.chartInstance,o=i.scales[e.xScaleID],r=i.scales[e.yScaleID],a=i.chartArea;t.ranges={};var s=0,c=0;o&&(s=n.isValid(e.xMin)?e.xMin:o.getPixelForValue(a.left),c=n.isValid(e.xMax)?e.xMax:o.getPixelForValue(a.right),t.ranges[e.xScaleID]={min:Math.min(s,c),max:Math.max(s,c)}),r&&(s=n.isValid(e.yMin)?e.yMin:r.getPixelForValue(a.bottom),c=n.isValid(e.yMax)?e.yMax:r.getPixelForValue(a.top),t.ranges[e.yScaleID]={min:Math.min(s,c),max:Math.max(s,c)})},configure:function(){var t=this._model,e=this.options,i=this.chartInstance,o=i.scales[e.xScaleID],r=i.scales[e.yScaleID],a=i.chartArea;t.clip={x1:a.left,x2:a.right,y1:a.top,y2:a.bottom};var s,c,u=a.left,l=a.top,f=a.right,d=a.bottom;o&&(s=n.isValid(e.xMin)?o.getPixelForValue(e.xMin):a.left,c=n.isValid(e.xMax)?o.getPixelForValue(e.xMax):a.right,u=Math.min(s,c),f=Math.max(s,c)),r&&(s=n.isValid(e.yMin)?r.getPixelForValue(e.yMin):a.bottom,c=n.isValid(e.yMax)?r.getPixelForValue(e.yMax):a.top,l=Math.min(s,c),d=Math.max(s,c)),t.left=u,t.top=l,t.right=f,t.bottom=d,t.borderColor=e.borderColor,t.borderWidth=e.borderWidth,t.backgroundColor=e.backgroundColor},inRange:function(t,e){var n=this._model;return n&&t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom},getCenterPoint:function(){var t=this._model;return{x:(t.right+t.left)/2,y:(t.bottom+t.top)/2}},getWidth:function(){var t=this._model;return Math.abs(t.right-t.left)},getHeight:function(){var t=this._model;return Math.abs(t.bottom-t.top)},getArea:function(){return this.getWidth()*this.getHeight()},draw:function(){var t=this._view,e=this.chartInstance.chart.ctx;e.save(),e.beginPath(),e.rect(t.clip.x1,t.clip.y1,t.clip.x2-t.clip.x1,t.clip.y2-t.clip.y1),e.clip(),e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,e.fillStyle=t.backgroundColor;var n=t.right-t.left,i=t.bottom-t.top;e.fillRect(t.left,t.top,n,i),e.strokeRect(t.left,t.top,n,i),e.restore()}});return i}},{"../helpers.js":4}]},{},[5]);